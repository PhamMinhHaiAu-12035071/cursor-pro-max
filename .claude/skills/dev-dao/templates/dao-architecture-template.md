# [Tên Hệ Thống] — Architecture Document theo Binh Pháp Tôn Tử

> Template chuẩn cho output của command `/dev-dao-architecture`. Điền thông tin vào mỗi section. Xóa hướng dẫn trong ngoặc vuông sau khi điền.

---

## Đạo — Mục Tiêu & Vision

**Purpose statement:** [Một câu mô tả hệ thống tồn tại để làm gì, cho ai]

**Stakeholder alignment:**

| Stakeholder | Mục tiêu chính | Mối quan tâm |
|-------------|----------------|-------------|
| [Role 1] | [Mục tiêu] | [Lo ngại] |
| [Role 2] | [Mục tiêu] | [Lo ngại] |

**Quy luật bất biến:** [Những nguyên tắc không bao giờ được vi phạm, VD: mọi write phải có audit log]

---

## Thiên — Nhịp Độ & Timing

**Release cadence:** [Sprint bao lâu, deploy khi nào, freeze window]

**SLOs:**

| Metric | Target | Alert threshold |
|--------|--------|----------------|
| [Metric 1] | [Target] | [Threshold] |
| [Metric 2] | [Target] | [Threshold] |

**Kill-switch:** [Feature flags, circuit breakers, global emergency stop]

**Deployment windows:** [Khi nào deploy, khi nào không deploy]

---

## Địa — Kiến Trúc Lớp

```
Lớp 0 — Interface
[Mô tả: UI, API Gateway, entry points]

Lớp 1 — Orchestration
[Mô tả: logic điều phối, routing, planning]

Lớp 2 — Services
[Mô tả: business logic, workers, agents]

Lớp 3 — Storage
[Mô tả: database, cache, message queue, file storage]

Lớp 4 — Observability
[Mô tả: logs, metrics, traces, audit trail]
```

**Dependency flow:** [Mô tả dependencies đi từ trên xuống, highlight any exceptions]

**Ranh giới quan trọng:** [Boundaries giữa các lớp, contracts, API schemas]

---

## Tướng — Vai Trò & Quyền Hạn

| Vai trò | Component | Quyền hạn | Accountability |
|---------|-----------|-----------|---------------|
| [Role 1] | [Component] | [Permissions] | [Responsible for] |
| [Role 2] | [Component] | [Permissions] | [Responsible for] |

**Escalation path:** [Component A → Component B → Human khi nào]

**Separation of duties:** [Ai tạo ≠ ai approve cho operations nhạy cảm]

---

## Pháp — Luật Vận Hành

**Contracts:**
- API contracts: [versioning strategy, schema validation]
- Error contracts: [standard error format, error codes]

**Guardrails:**
- [Rate limiting policy]
- [Input validation strategy]
- [Access control model: deny-by-default]

**Idempotency & Retry:**
- [Idempotency key strategy]
- [Retry policy: backoff, max retries, dead letter]

**Policy-as-Code:** [Policies viết thành code, test được, version được]

---

## Hư/Thực — Chiến Thuật Rollout

**Deployment strategy:** [Canary / Blue-Green / Rolling / Feature flags]

**Rollout phases:**

| Phase | Traffic % | Duration | Criteria chuyển phase |
|-------|-----------|----------|----------------------|
| Canary | [%] | [Time] | [Metrics threshold] |
| Expand | [%] | [Time] | [Metrics threshold] |
| Full | 100% | - | [All metrics green] |

**Rollback plan:**
- Trigger: [Khi nào rollback]
- Method: [Cách rollback: revert deploy, toggle flag, restore DB]
- Time: [Rollback mất bao lâu]
- Who: [Ai có quyền rollback]

---

## Guardrails & KPIs

| Category | Metric | Target | Alert |
|----------|--------|--------|-------|
| [Cat 1] | [Metric] | [Target] | [Threshold] |
| [Cat 2] | [Metric] | [Target] | [Threshold] |

---

## Lộ Trình Triển Khai

**Phase 1 — [Tên] ([Timeline]):**
- [ ] [Task 1]
- [ ] [Task 2]

**Phase 2 — [Tên] ([Timeline]):**
- [ ] [Task 1]
- [ ] [Task 2]

**Phase 3 — [Tên] ([Timeline]):**
- [ ] [Task 1]
- [ ] [Task 2]

---

## Checklist "Xong Mới Chơi"

- [ ] Purpose statement rõ ràng, team đồng thuận
- [ ] SLOs define xong, monitoring sẵn sàng
- [ ] Kiến trúc lớp có ranh giới rõ ràng
- [ ] Roles phân quyền theo least privilege
- [ ] Contracts versioned, validation ở mọi boundary
- [ ] Idempotency cho mọi write operation
- [ ] Rollback plan tested
- [ ] Deployment pipeline sẵn sàng
- [ ] Alert rules configured
- [ ] On-call và escalation path documented

---

*Generated by `/dev-dao-architecture` — Khung Binh Pháp Tôn Tử cho System Architecture*
